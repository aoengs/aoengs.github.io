---
import "../styles/global.css";
import LaunchpadGrid from "../components/LaunchpadGrid.astro";
import { apps, categories } from "../data/apps";
---

<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Aoengs å¯åŠ¨å°</title>
    <style>
      /* è·Ÿéšé¼ æ ‡çš„åœ†ç‚¹æ ·å¼ */
      .mouse-dot {
        position: fixed;
        width: 25px;
        height: 25px;
        background-color: rgba(0, 0, 0, 0.05);
        border-radius: 50%;
        pointer-events: none; /* ç¡®ä¿åœ†ç‚¹ä¸å½±å“é¼ æ ‡äº‹ä»¶ */
        transform: translate(-50%, -50%);
        z-index: 9999;
        transition: transform 0.1s ease-out;
      }

      /* æ·»åŠ æ–‡æœ¬å±…ä¸­æ ·å¼ */
      .category-list {
        list-style: none;
        padding: 10px;
        text-align: center; /* ç¡®ä¿åˆ—è¡¨é¡¹ä¸­çš„æ–‡æœ¬å±…ä¸­ */
      }

      .category-label {
        display: block; /* ç¡®ä¿æ ‡ç­¾å æ®æ•´ä¸ªè¡Œ */
        margin: 0 auto; /* è‡ªåŠ¨å·¦å³è¾¹è·ä»¥å±…ä¸­ */
        color: #000000; /* ä¿æŒåŸæœ‰é¢œè‰² */
        margin-bottom: 25px;
        font-size: 18px;
        padding: 6px;
        border-radius: 10px;}
      /* box-shadow: 0 0 10px #1221cb; */
      /*border-radius: 20px 20px 20px 20px; */
    </style>
  </head>
  <body style="background-color: #F5F8FA;">
    <div class="app-container">
      <!-- å·¦ä¾§æœç´¢æ¡† -->
      <div class="left-search-box" id="leftSearchBox">
        <input type="text" placeholder="è¯·è¾“å…¥" id="searchInput" />
        <span class="search-label" style="font-size: 14px;"> </span>
      </div>

      <!-- å·¦ä¾§å¯¼èˆªå®¹å™¨ -->
      <div class="sidebar-wrapper">
        <nav class="sidebar">
          <ul class="category-list">
            <li>
              <span class="category-label">å·¥å…·ç®±</span>
            </li>
            {
              categories.map((category) => (
                <li>
                  <button class="category-btn" data-category={category.id}>
                    {category.name}
                  </button>
                </li>
              ))
            }
          </ul>
        </nav>
      </div>

      <div class="main-content">
        <LaunchpadGrid apps={apps} />
      </div>
    </div>

    <!-- è·Ÿéšé¼ æ ‡çš„åœ†ç‚¹ -->
    <div class="mouse-dot"></div>

    <!-- å³ä¾§å°å¡ç‰‡ -->
    <div class="right-cards">
      <div class="card" id="card1" style="background-color: #1e0ca2;">
        <span class="emoji">ğŸ˜€</span>
        <span class="text" style="color: #fff;">è”ç³»æ–¹å¼</span>
      </div>
      <div class="card" id="card2" style="background-color: #1e0ca2;">
        <span class="emoji">ğŸŒŸ</span>
        <span class="text" style="color: #fff;">å…³äºæˆ‘</span>
      </div>
      <div class="card" id="scrollToTopCard" style="background-color: #1e0ca2;">
        <span class="emoji">ğŸš€</span>
        <span class="text" style="color: #fff;">è¿”å›é¡¶éƒ¨</span>
      </div>
    </div>

    <script>
      // æ·»åŠ ç±»å‹æ–­è¨€
      const searchInput = document.getElementById(
        "searchInput"
      ) as HTMLInputElement;
      const appGrid = document.getElementById("appGrid") as HTMLDivElement;
      const categoryBtns =
        document.querySelectorAll<HTMLButtonElement>(".category-btn");
      const appItems = document.querySelectorAll<HTMLElement>(".app-item");
      let currentCategory = "all";

      // åˆ†ç±»åˆ‡æ¢åŠŸèƒ½
      categoryBtns.forEach((btn) => {
        btn.addEventListener("click", () => {
          // ä½¿ç”¨å¯é€‰é“¾å’Œç±»å‹æ–­è¨€
          const category = btn.getAttribute("data-category") || "all";
          currentCategory = category;

          // æ›´æ–°æŒ‰é’®çŠ¶æ€
          categoryBtns.forEach((b) => b.classList.remove("active"));
          btn.classList.add("active");

          // æ˜¾ç¤º/éšè—åº”ç”¨
          appItems.forEach((item) => {
            const appCategory = item.getAttribute("data-category");
            if (category === "all" || appCategory === category) {
              item.style.display = "flex";
            } else {
              item.style.display = "none";
            }
          });
        });
      });

      // æœç´¢åŠŸèƒ½
      searchInput?.addEventListener("input", (e) => {
        const searchTerm = (e.target as HTMLInputElement).value
          .toLowerCase()
          .trim();

        appItems.forEach((item) => {
          const nameElement = item.querySelector(".app-name");
          const name = nameElement
            ? nameElement.textContent?.toLowerCase() || ""
            : "";
          const category = item.getAttribute("data-category") || "";
          const matchesSearch = name.includes(searchTerm);
          const matchesCategory =
            currentCategory === "all" || category === currentCategory;

          if (matchesSearch && matchesCategory) {
            item.style.display = "flex";
          } else {
            item.style.display = "none";
          }
        });
      });

      // é»˜è®¤é€‰ä¸­"å…¨éƒ¨åº”ç”¨"
      const defaultBtn = document.querySelector<HTMLButtonElement>(
        '[data-category="all"]'
      );
      defaultBtn?.classList.add("active");

      const mouseDot = document.querySelector(".mouse-dot");

      document.addEventListener("mousemove", (event) => {
        mouseDot.style.left = `${event.clientX}px`;
        mouseDot.style.top = `${event.clientY}px`;
      });

      document.addEventListener("click", (event) => {
        const colors = [
          "#e74c3c",
          "#8e44ad",
          "#3498db",
          "#1abc9c",
          "#f1c40f",
          "#e67e22",
          "#2ecc71",
        ];
        const particles = 30; // ç²’å­æ•°é‡

        for (let i = 0; i < particles; i++) {
          const particle = document.createElement("div");
          particle.className = "particle";
          particle.style.left = `${event.clientX}px`;
          particle.style.top = `${event.clientY}px`;
          particle.style.backgroundColor =
            colors[Math.floor(Math.random() * colors.length)];

          // éšæœºæ–¹å‘å’Œé€Ÿåº¦
          const angle = Math.random() * 2 * Math.PI;
          const distance = Math.random() * 100 + 50; // ç²’å­çˆ†ç‚¸çš„è·ç¦»
          const x = Math.cos(angle) * distance;
          const y = Math.sin(angle) * distance;

          particle.style.setProperty("--x", `${x}px`);
          particle.style.setProperty("--y", `${y}px`);

          document.body.appendChild(particle);

          // åŠ¨ç”»ç»“æŸåç§»é™¤ç²’å­
          particle.addEventListener("animationend", () => {
            particle.remove();
          });
        }
      });

      // ç¡®ä¿é€‰æ‹©å™¨æ­£ç¡®
      const scrollToTopCard = document.getElementById("scrollToTopCard");

      // æ£€æŸ¥æ˜¯å¦æˆåŠŸè·å–åˆ°å…ƒç´ 
      if (scrollToTopCard) {
        scrollToTopCard.addEventListener("click", () => {
          window.scrollTo({
            top: 0,
            behavior: "smooth", // å¹³æ»‘æ»šåŠ¨æ•ˆæœ
          });
        });
      } else {
        console.error('Element with id "scrollToTopCard" not found.');
      }

      // ä¸ºå¡ç‰‡1æ·»åŠ ç‚¹å‡»äº‹ä»¶
      const card1 = document.getElementById("card1");
      if (card1) {
        card1.addEventListener("click", () => {
          alert("è”ç³»æ–¹å¼ï¼š186****1616");
        });
      }

      // ä¸ºå¡ç‰‡2æ·»åŠ ç‚¹å‡»äº‹ä»¶
      const card2 = document.getElementById("card2");
      if (card2) {
        card2.addEventListener("click", () => {
          alert("å…³äºæˆ‘ï¼šAoengs");
        });
      }

      // ç¡®ä¿é€‰æ‹©å™¨æ­£ç¡®
      const blogButton = document.getElementById("blogButton");

      // æ£€æŸ¥æ˜¯å¦æˆåŠŸè·å–åˆ°å…ƒç´ 
      if (blogButton) {
        blogButton.addEventListener("click", () => {
          window.location.href = "/about"; // è·³è½¬åˆ° about.astro é¡µé¢
        });
      } else {
        console.error("Blog button not found.");
      }

      // å®šä¹‰ä¸€ç»„emoji
      const emojis = [
        "ğŸ˜€",
        "ğŸš€",
        "ğŸŒŸ",
        "ğŸ¨",
        "ğŸ‰",
        "ğŸ“š",
        "ğŸ’»",
        "ğŸ¶",
        "ğŸ¦",
        "ğŸ¦‹",
        "ğŸ±",
        "ğŸ·",
        "ğŸ¸",
        "ğŸ¤¡",
        "ğŸ¤“",
        "ğŸ¤–",
        "ğŸ¯",
        "âœï¸",
        "ğŸ–¼ï¸",
        "ğŸ¥",
        "âœ¨",
        "ğŸ¦Š",
        "ğŸ¥³",
        "ğŸƒ",
      ];

      // è·å–æ‰€æœ‰çš„app-iconå…ƒç´ 
      const appIcons = document.querySelectorAll(".app-icon");

      // ç”Ÿæˆéšæœºé¢œè‰²çš„å‡½æ•°
      function getRandomColor() {
        const letters = "0123456789ABCDEF";
        let color = "#";
        for (let i = 0; i < 6; i++) {
          color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
      }

      // ä¸ºæ¯ä¸ªapp-iconè®¾ç½®éšæœºemojiå’ŒéšæœºèƒŒæ™¯é¢œè‰²
      appIcons.forEach((icon) => {
        const randomEmoji = emojis[Math.floor(Math.random() * emojis.length)];
        icon.textContent = randomEmoji; // è®¾ç½®å›¾æ ‡çš„å†…å®¹ä¸ºéšæœºemoji
        icon.style.backgroundColor = getRandomColor(); // è®¾ç½®éšæœºèƒŒæ™¯é¢œè‰²
      });
    </script>
  </body>
</html>
