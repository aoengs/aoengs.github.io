---
import '../styles/launchpad.css';
import LaunchpadGrid from '../components/LaunchpadGrid.astro';

// 应用数据
const apps = [
    { name: "奇迹秀", icon: "🐸",url:"https://www.qijishow.com/down/index.html" },
    { name: "unsplash", icon: "🐝" ,url:"https://unsplash.com/"},
    { name: "astro", icon: "🦆" ,url:"https://astro.build/" },
    { name: "iconfont", icon: "🐤" ,url:"https://www.iconfont.cn/"},
    { name: "unDraw", icon: "🥳" ,url:"https://undraw.co/"},
    { name: "ollama", icon: "🐥" ,url:"https://github.com/ollama/ollama"},
    { name: "待更新", icon: "🧣" ,url:"https://www.qijishow.com/down/index.html"},
    { name: "待更新", icon: "🧶" ,url:"https://www.qijishow.com/down/index.html"},
    { name: "待更新", icon: "🎅" ,url:"https://www.qijishow.com/down/index.html"},
    { name: "待更新", icon: "🏓" ,url:"https://www.qijishow.com/down/index.html"},
    { name: "待更新", icon: "🤡" ,url:"https://www.qijishow.com/down/index.html"},
    { name: "待更新", icon: "🐶" ,url:"https://www.qijishow.com/down/index.html"},
    { name: "待更新", icon: "🦄" ,url:"https://www.qijishow.com/down/index.html"},
    { name: "待更新", icon: "🐵" ,url:"https://www.qijishow.com/down/index.html"},
    { name: "待更新", icon: "🎱" ,url:"https://www.qijishow.com/down/index.html"},
    { name: "待更新", icon: "🦋" ,url:"https://www.qijishow.com/down/index.html"},
    { name: "待更新", icon: "🦁" ,url:"https://www.qijishow.com/down/index.html"},
    { name: "待更新", icon: "🥸" ,url:"https://www.qijishow.com/down/index.html"},
    { name: "待更新", icon: "🤓" ,url:"https://www.qijishow.com/down/index.html" },
    { name: "待更新", icon: "🤶" ,url:"https://www.qijishow.com/down/index.html"},
    { name: "待更新", icon: "👑" ,url:"https://www.qijishow.com/down/index.html"},
    { name: "待更新", icon: "👓" ,url:"https://www.qijishow.com/down/index.html"},
    { name: "待更新", icon: "🥽" ,url:"https://www.qijishow.com/down/index.html"},
    { name: "待更新", icon: "🐹" ,url:"https://www.qijishow.com/down/index.html"},
    { name: "待更新", icon: "🦊",url:"https://www.qijishow.com/down/index.html" },
    { name: "待更新", icon: "🐽" ,url:"https://www.qijishow.com/down/index.html"},
    { name: "待更新", icon: "🐣" ,url:"https://www.qijishow.com/down/index.html"},
    { name: "待更新", icon: "🐞" ,url:"https://www.qijishow.com/down/index.html"}
];
---

<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aoengs 启动台</title>
</head>
<body>
    <div class="launchpad">
        <div class="search-box">
            <input type="text" placeholder="搜索应用" id="searchInput">
        </div>
        <LaunchpadGrid apps={apps} />
        <script id="appsData" type="application/json">{JSON.stringify(apps)}</script>
    </div>

    <script define:vars={{ apps }}>
        const originalApps = apps;
        const searchInput = document.getElementById('searchInput');
        const appGrid = document.getElementById('appGrid');
        const appsDataElement = document.getElementById('appsData');

        // 搜索功能
        let searchTimeout;
        searchInput.addEventListener('input', (e) => {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                const searchTerm = e.target.value.toLowerCase().trim();
                const filteredApps = originalApps.filter(app => 
                    app.name.toLowerCase().includes(searchTerm)
                );
                updateGrid(filteredApps);
            }, 300);
        });

        function updateGrid(apps) {
            appGrid.innerHTML = apps.map((app, index) => `
                <a href="${app.url}" 
                   target="_blank" 
                   class="app-item" 
                   style="animation: popIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) ${index * 0.03}s forwards">
                    <div class="app-icon">${app.icon}</div>
                    <div class="app-name">${app.name}</div>
                </a>
            `).join('');
        }

        // 点击应用效果
        appGrid.addEventListener('click', (e) => {
            const appItem = e.target.closest('.app-item');
            if (appItem) {
                const icon = appItem.querySelector('.app-icon');
                icon.style.transform = 'scale(0.9)';
                setTimeout(() => {
                    icon.style.transform = '';
                }, 100);
            }
        });

        // 防止搜索框失去焦点
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.search-box')) {
                searchInput.blur();
            }
        });
    </script>
</body>
</html>