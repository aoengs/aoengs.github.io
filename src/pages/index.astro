---
import '../styles/launchpad.css';
import LaunchpadGrid from '../components/LaunchpadGrid.astro';

// åº”ç”¨æ•°æ®
const apps = [
    { name: "Safari", icon: "ğŸŒ" },
    { name: "é‚®ä»¶", icon: "âœ‰ï¸" },
    { name: "æ—¥å†", icon: "ğŸ“…" },
    { name: "å¤‡å¿˜å½•", icon: "ğŸ“" },
    { name: "ç…§ç‰‡", icon: "ğŸ–¼ï¸" },
    { name: "ä¿¡æ¯", icon: "ğŸ’¬" },
    { name: "åœ°å›¾", icon: "ğŸ—ºï¸" },
    { name: "éŸ³ä¹", icon: "ğŸµ" },
    { name: "App Store", icon: "ğŸª" },
    { name: "è®¾ç½®", icon: "âš™ï¸" },
    { name: "æ—¶é’Ÿ", icon: "â°" },
    { name: "è®¡ç®—å™¨", icon: "ğŸ§®" },
    { name: "å¤©æ°”", icon: "ğŸŒ¤ï¸" },
    { name: "æé†’äº‹é¡¹", icon: "ğŸ“‹" },
    { name: "FaceTime", icon: "ğŸ“±" },
    { name: "å›¾ä¹¦", icon: "ğŸ“š" },
    { name: "æ’­å®¢", icon: "ğŸ™ï¸" },
    { name: "è‚¡å¸‚", icon: "ğŸ“ˆ" },
    { name: "å®¶åº­", icon: "ğŸ " },
    { name: "æŸ¥æ‰¾", icon: "ğŸ”" },
    { name: "ç»ˆç«¯", icon: "âŒ¨ï¸" },
    { name: "é¢„è§ˆ", icon: "ğŸ‘ï¸" },
    { name: "Numbers", icon: "ğŸ“Š" },
    { name: "Pages", icon: "ğŸ“„" },
    { name: "Keynote", icon: "ğŸ­" },
    { name: "GarageBand", icon: "ğŸ¸" },
    { name: "iMovie", icon: "ğŸ¬" },
    { name: "å¯åŠ¨å°", icon: "â­" }
];
---

<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>macOS å¯åŠ¨å°</title>
</head>
<body>
    <div class="launchpad">
        <div class="search-box">
            <input type="text" placeholder="æœç´¢åº”ç”¨" id="searchInput">
        </div>
        <LaunchpadGrid apps={apps} />
        <script id="appsData" type="application/json">{JSON.stringify(apps)}</script>
    </div>

    <script define:vars={{ apps }}>
        const originalApps = apps;
        const searchInput = document.getElementById('searchInput');
        const appGrid = document.getElementById('appGrid');
        const appsDataElement = document.getElementById('appsData');

        // æœç´¢åŠŸèƒ½
        let searchTimeout;
        searchInput.addEventListener('input', (e) => {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                const searchTerm = e.target.value.toLowerCase().trim();
                const filteredApps = originalApps.filter(app => 
                    app.name.toLowerCase().includes(searchTerm)
                );
                updateGrid(filteredApps);
            }, 300);
        });

        function updateGrid(apps) {
            appGrid.innerHTML = apps.map((app, index) => `
                <div class="app-item" style="animation: popIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) ${index * 0.03}s forwards">
                    <div class="app-icon">${app.icon}</div>
                    <div class="app-name">${app.name}</div>
                </div>
            `).join('');
        }

        // ç‚¹å‡»åº”ç”¨æ•ˆæœ
        appGrid.addEventListener('click', (e) => {
            const appItem = e.target.closest('.app-item');
            if (appItem) {
                const icon = appItem.querySelector('.app-icon');
                icon.style.transform = 'scale(0.9)';
                setTimeout(() => {
                    icon.style.transform = '';
                }, 100);
            }
        });

        // é˜²æ­¢æœç´¢æ¡†å¤±å»ç„¦ç‚¹
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.search-box')) {
                searchInput.blur();
            }
        });
    </script>
</body>
</html>